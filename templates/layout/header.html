{% load i18n %}
{% load lp_extras %}
{% load staticfiles %}
{% roots as root_categories %}
{% get_available_languages as LANGUAGES %}
{% get_current_language as LANGUAGE_CODE %}


<div class="masthead clearfix">
  <div class="inner">
    <a href="/" class="masthead-brand"><img src="/static/images/Muveqqeti_w.png" title="HOFFMANN" alt="HOFFMANN" height="auto" width="180"></a>
    <div class="navbar-header mobile-menu">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-topmenu-mob" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="navbar-topmenu" class="pull-left navbar-collapse collapse hidden-xs">
      <a href="javascript:void(0);" class="mobile-menu-close"></a>
      <ul class="nav masthead-nav">
          {% for category in root_categories %}
            <li class="{{ category.get_children|yesno:'dropdown,' }}">
              <a href="{{ category.url }}" class="dropdown-toggle" data-toggle="dropdown" role="button"
                 aria-haspopup="true" aria-expanded="false">
                {{ category.name }}
              </a>
              <ul class="dropdown-menu">
                {% for subcategory in category.get_children %}
                  <li>
                    <div class="picture">
                      <img src="{{ subcategory.page.main_image.url }}"
                           alt="{{ category.name }}"
                           title="{{ category.name }}"
                           height="121">
                    </div>
                    <div>{{ subcategory.page.h1 }}</div>
                    <a href="{{ subcategory.url }}"></a>
                  </li>
                {% endfor %}
              </ul>
            </li>
          {% endfor %}
      </ul>
    </nav>
      <nav id="navbar-topmenu-mob" class="pull-left navbar-collapse collapse visible-xs">
          <a href="javascript:void(0);" class="mobile-menu-close"></a>
          <div class="mob-menu-title">
              <h2>{% trans 'Catalog' %}</h2>
          </div>
          <div class="search-line-mob pull-left">
              <form name="search-line" action="/search/" method="get">
                  <div class="form-control">
                      <input type="submit" value="">
                      <input type="text" name="term" value="" class="f js-search-input">
                  </div>
              </form>
          </div>
          <ul id="accordion" class="nav masthead-nav accordion">
              {% for category in root_categories %}
              <li class="{{ category.get_children|yesno:'dropdown,' }}">
                  <div class="link"><i class="fa fa-database"></i>{{ category.name }}<i class="fa fa-chevron-down"></i></div>
                  <ul class="submenu">
                      {% for subcategory in category.get_children %}
                      <li>
                          <a href="{{ subcategory.url }}">{{ subcategory.page.h1 }}</a>
                      </li>
                      {% endfor %}
                  </ul>
              </li>
              {% endfor %}
          </ul>
          <div class="mob-menu-title">
          <h2>{% trans 'About company' %}</h2>
          </div>
          <ul class="mob-menu-2">
              <li><a href="{% url 'pages:flat_page' 'about' %}">{% trans 'About' %}</a></li>
              <li><a href="{% url 'pages:flat_page' 'contacts' %}">{% trans 'Contacts' %}</a></li>
          </ul>
      </nav>
    <div class="search-line pull-left">
      <form name="search-line" action="/search/" method="get">
        <div class="form-control">
          <input type="submit" value="">
          <input type="text" name="term" value="" class="f js-search-input">
        </div>
      </form>
    </div>
    <div class="lang-line pull-left">
      <nav>
        <ul class="nav">
          {% resolve_url request as resolve_match %}
          {% for lang_code, _ in LANGUAGES %}
            {% if lang_code == LANGUAGE_CODE %}
              <li class="active"><a href="{% url 'index' %}">{{ lang_code|upper }}</a></li>
            {% else %}
              {% language lang_code %}
                {% reverse_url resolve_match as path %}
                <li><a href="{{ path }}">{{ lang_code|upper }}</a></li>
              {% endlanguage %}
            {% endif %}
          {% endfor %}
        </ul>
      </nav>
    </div>
  </div>
</div>
